{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "feedback-editorial-feed",
  "type": "registry:ui",
  "title": "Feedback Editorial Feed",
  "description": "Rich editorial layout with margin vote annotations and stacked list items.",
  "dependencies": [
    "motion",
    "@phosphor-icons/react",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "ui/feedback-editorial-feed.tsx",
      "content": "\"use client\";\n\nimport { ArrowDown, ArrowUp } from \"@phosphor-icons/react\";\nimport { motion } from \"motion/react\";\nimport {\n  createContext,\n  type ReactNode,\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n} from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\n// ─── Vote Context ────────────────────────────────────────────────────────────\n\ntype VoteDirection = \"upvote\" | \"downvote\" | null;\n\ninterface VoteContextValue {\n  voteType: VoteDirection;\n  upvotes: number;\n  downvotes: number;\n  vote: (direction: \"upvote\" | \"downvote\") => void;\n}\n\nconst VoteContext = createContext<VoteContextValue | null>(null);\n\nfunction useVoteContext(): VoteContextValue {\n  const context = useContext(VoteContext);\n  if (!context) {\n    throw new Error(\n      \"Editorial feed vote sub-components must be used within <EditorialFeedItem>\"\n    );\n  }\n  return context;\n}\n\n// ─── Status Color Map ────────────────────────────────────────────────────────\n\nconst STATUS_COLORS = {\n  purple:\n    \"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400\",\n  green: \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\",\n  blue: \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400\",\n  red: \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\",\n  amber: \"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400\",\n  pink: \"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400\",\n  gray: \"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400\",\n} as const;\n\ntype StatusColor = keyof typeof STATUS_COLORS;\n\n// ─── EditorialFeed ───────────────────────────────────────────────────────────\n\ninterface EditorialFeedProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeed({ children, className }: EditorialFeedProps) {\n  return (\n    <div className={cn(\"space-y-0 divide-y divide-border/20\", className)}>\n      {children}\n    </div>\n  );\n}\n\n// ─── EditorialFeedItem ───────────────────────────────────────────────────────\n\ninterface EditorialFeedItemProps {\n  defaultUpvotes?: number;\n  defaultDownvotes?: number;\n  onVoteChange?: (upvotes: number, downvotes: number) => void;\n  upvotes?: number;\n  downvotes?: number;\n  voteType?: VoteDirection;\n  onVote?: (direction: \"upvote\" | \"downvote\") => void;\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedItem({\n  defaultUpvotes = 0,\n  defaultDownvotes = 0,\n  onVoteChange,\n  upvotes: controlledUpvotes,\n  downvotes: controlledDownvotes,\n  voteType: controlledVoteType,\n  onVote,\n  children,\n  className,\n}: EditorialFeedItemProps) {\n  const [internalVoteType, setInternalVoteType] = useState<VoteDirection>(null);\n  const [internalUpvotes, setInternalUpvotes] = useState(defaultUpvotes);\n  const [internalDownvotes, setInternalDownvotes] = useState(defaultDownvotes);\n\n  const isControlled = controlledUpvotes !== undefined;\n\n  const internalVote = useCallback(\n    (direction: \"upvote\" | \"downvote\") => {\n      setInternalVoteType((prev) => {\n        const isToggleOff = prev === direction;\n        const next = isToggleOff ? null : direction;\n\n        setInternalUpvotes((u) => {\n          let newUp = u;\n          if (prev === \"upvote\") {\n            newUp -= 1;\n          }\n          if (next === \"upvote\") {\n            newUp += 1;\n          }\n          return newUp;\n        });\n\n        setInternalDownvotes((d) => {\n          let newDown = d;\n          if (prev === \"downvote\") {\n            newDown -= 1;\n          }\n          if (next === \"downvote\") {\n            newDown += 1;\n          }\n          return newDown;\n        });\n\n        return next;\n      });\n\n      setInternalUpvotes((currentUp) => {\n        setInternalDownvotes((currentDown) => {\n          onVoteChange?.(currentUp, currentDown);\n          return currentDown;\n        });\n        return currentUp;\n      });\n    },\n    [onVoteChange]\n  );\n\n  const contextValue = useMemo(\n    () =>\n      isControlled\n        ? {\n            voteType: controlledVoteType ?? null,\n            upvotes: controlledUpvotes,\n            downvotes: controlledDownvotes ?? 0,\n            vote: (direction: \"upvote\" | \"downvote\") => onVote?.(direction),\n          }\n        : {\n            voteType: internalVoteType,\n            upvotes: internalUpvotes,\n            downvotes: internalDownvotes,\n            vote: internalVote,\n          },\n    [\n      isControlled,\n      controlledVoteType,\n      controlledUpvotes,\n      controlledDownvotes,\n      onVote,\n      internalVoteType,\n      internalUpvotes,\n      internalDownvotes,\n      internalVote,\n    ]\n  );\n\n  return (\n    <VoteContext.Provider value={contextValue}>\n      <div className={cn(\"relative py-4 pl-16\", className)}>{children}</div>\n    </VoteContext.Provider>\n  );\n}\n\n// ─── EditorialFeedVote ───────────────────────────────────────────────────────\n\nfunction EditorialFeedVote() {\n  const { voteType, upvotes, downvotes, vote } = useVoteContext();\n\n  return (\n    <div className=\"absolute top-4 left-0 flex w-12 flex-col items-center gap-0.5\">\n      <motion.button\n        aria-label={voteType === \"upvote\" ? \"Remove upvote\" : \"Upvote\"}\n        className={cn(\n          \"transition-colors\",\n          voteType === \"upvote\"\n            ? \"text-primary\"\n            : \"text-muted-foreground/30 hover:text-primary\"\n        )}\n        onClick={(e) => {\n          e.stopPropagation();\n          vote(\"upvote\");\n        }}\n        type=\"button\"\n        whileTap={{ scale: 0.8 }}\n      >\n        <ArrowUp\n          className=\"h-3 w-3\"\n          weight={voteType === \"upvote\" ? \"bold\" : \"regular\"}\n        />\n      </motion.button>\n      <span className=\"text-[9px] text-muted-foreground/40 tabular-nums\">\n        {upvotes}&uarr; {downvotes}&darr;\n      </span>\n      <motion.button\n        aria-label={voteType === \"downvote\" ? \"Remove downvote\" : \"Downvote\"}\n        className={cn(\n          \"transition-colors\",\n          voteType === \"downvote\"\n            ? \"text-destructive\"\n            : \"text-muted-foreground/30 hover:text-destructive\"\n        )}\n        onClick={(e) => {\n          e.stopPropagation();\n          vote(\"downvote\");\n        }}\n        type=\"button\"\n        whileTap={{ scale: 0.8 }}\n      >\n        <ArrowDown\n          className=\"h-3 w-3\"\n          weight={voteType === \"downvote\" ? \"bold\" : \"regular\"}\n        />\n      </motion.button>\n    </div>\n  );\n}\n\n// ─── EditorialFeedRule ───────────────────────────────────────────────────────\n\ninterface EditorialFeedRuleProps {\n  className?: string;\n}\n\nfunction EditorialFeedRule({ className }: EditorialFeedRuleProps) {\n  return (\n    <div\n      className={cn(\n        \"absolute top-0 bottom-0 left-14 w-px bg-border/20\",\n        className\n      )}\n    />\n  );\n}\n\n// ─── EditorialFeedContent ────────────────────────────────────────────────────\n\ninterface EditorialFeedContentProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedContent({\n  children,\n  className,\n}: EditorialFeedContentProps) {\n  return <div className={className}>{children}</div>;\n}\n\n// ─── EditorialFeedTitle ──────────────────────────────────────────────────────\n\ninterface EditorialFeedTitleProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedTitle({ children, className }: EditorialFeedTitleProps) {\n  return (\n    <h3\n      className={cn(\n        \"font-display text-base leading-snug tracking-tight\",\n        className\n      )}\n    >\n      {children}\n    </h3>\n  );\n}\n\n// ─── EditorialFeedMeta ───────────────────────────────────────────────────────\n\ninterface EditorialFeedMetaProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedMeta({ children, className }: EditorialFeedMetaProps) {\n  return (\n    <div\n      className={cn(\n        \"mt-1.5 flex items-center gap-2 text-[10px] text-muted-foreground/60\",\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n\n// ─── EditorialFeedStatus ─────────────────────────────────────────────────────\n\ninterface EditorialFeedStatusProps {\n  children: ReactNode;\n  color?: StatusColor;\n  className?: string;\n}\n\nfunction EditorialFeedStatus({\n  children,\n  color = \"gray\",\n  className,\n}: EditorialFeedStatusProps) {\n  return (\n    <span\n      className={cn(\n        \"inline-flex items-center rounded-sm px-2 py-0.5 font-normal text-[10px]\",\n        STATUS_COLORS[color],\n        className\n      )}\n    >\n      {children}\n    </span>\n  );\n}\n\n// ─── EditorialFeedTag ────────────────────────────────────────────────────────\n\ninterface EditorialFeedTagProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedTag({ children, className }: EditorialFeedTagProps) {\n  return <span className={cn(\"italic\", className)}>#{children}</span>;\n}\n\n// ─── EditorialFeedComments ───────────────────────────────────────────────────\n\ninterface EditorialFeedCommentsProps {\n  count: number;\n  className?: string;\n}\n\nfunction EditorialFeedComments({\n  count,\n  className,\n}: EditorialFeedCommentsProps) {\n  return (\n    <>\n      <span className={className}>&middot;</span>\n      <span className={className}>\n        {count} {count === 1 ? \"comment\" : \"comments\"}\n      </span>\n    </>\n  );\n}\n\n// ─── EditorialFeedTime ───────────────────────────────────────────────────────\n\ninterface EditorialFeedTimeProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction EditorialFeedTime({ children, className }: EditorialFeedTimeProps) {\n  return <span className={cn(\"italic\", className)}>{children}</span>;\n}\n\n// ─── Exports ─────────────────────────────────────────────────────────────────\n\nexport {\n  EditorialFeed,\n  EditorialFeedItem,\n  EditorialFeedVote,\n  EditorialFeedRule,\n  EditorialFeedContent,\n  EditorialFeedTitle,\n  EditorialFeedMeta,\n  EditorialFeedStatus,\n  EditorialFeedTag,\n  EditorialFeedComments,\n  EditorialFeedTime,\n};\n",
      "type": "registry:ui",
      "target": "components/ui/feedback-editorial-feed.tsx"
    }
  ],
  "meta": {
    "importSpecifier": "@/components/ui/feedback-editorial-feed"
  }
}