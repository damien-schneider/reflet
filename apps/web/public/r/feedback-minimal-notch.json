{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "feedback-minimal-notch",
  "type": "registry:ui",
  "title": "Feedback Minimal Notch",
  "description": "Minimal feedback card with a left-edge notch vote indicator.",
  "dependencies": [
    "motion",
    "@phosphor-icons/react",
    "clsx",
    "tailwind-merge"
  ],
  "registryDependencies": [],
  "files": [
    {
      "path": "ui/feedback-minimal-notch.tsx",
      "content": "\"use client\";\n\nimport { CaretDown, CaretUp, Chat } from \"@phosphor-icons/react\";\nimport { AnimatePresence, motion } from \"motion/react\";\nimport {\n  createContext,\n  type ReactNode,\n  useCallback,\n  useContext,\n  useState,\n} from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\n// ─── Color Map ──────────────────────────────────────────────────────────────\n\ntype BadgeColor =\n  | \"purple\"\n  | \"green\"\n  | \"blue\"\n  | \"red\"\n  | \"amber\"\n  | \"pink\"\n  | \"gray\";\n\nconst COLOR_MAP: Record<BadgeColor, string> = {\n  purple:\n    \"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400\",\n  green: \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\",\n  blue: \"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400\",\n  red: \"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400\",\n  amber: \"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400\",\n  pink: \"bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400\",\n  gray: \"bg-gray-100 text-gray-600 dark:bg-gray-800/30 dark:text-gray-400\",\n};\n\n// ─── Vote State ─────────────────────────────────────────────────────────────\n\ntype VoteType = \"upvote\" | \"downvote\" | null;\n\ninterface VoteState {\n  voteType: VoteType;\n  upvotes: number;\n  downvotes: number;\n  vote: (type: \"upvote\" | \"downvote\") => void;\n}\n\nfunction useVoteState(\n  initialUp: number,\n  initialDown: number,\n  onVoteChange?: (\n    voteType: VoteType,\n    upvotes: number,\n    downvotes: number\n  ) => void\n): VoteState {\n  const [voteType, setVoteType] = useState<VoteType>(null);\n  const [upvotes, setUpvotes] = useState(initialUp);\n  const [downvotes, setDownvotes] = useState(initialDown);\n\n  const vote = useCallback(\n    (type: \"upvote\" | \"downvote\") => {\n      let nextVoteType: VoteType;\n      let nextUp = upvotes;\n      let nextDown = downvotes;\n\n      if (voteType === type) {\n        nextVoteType = null;\n        if (type === \"upvote\") {\n          nextUp -= 1;\n        } else {\n          nextDown -= 1;\n        }\n      } else {\n        if (voteType === \"upvote\") {\n          nextUp -= 1;\n        }\n        if (voteType === \"downvote\") {\n          nextDown -= 1;\n        }\n        nextVoteType = type;\n        if (type === \"upvote\") {\n          nextUp += 1;\n        } else {\n          nextDown += 1;\n        }\n      }\n\n      setVoteType(nextVoteType);\n      setUpvotes(nextUp);\n      setDownvotes(nextDown);\n      onVoteChange?.(nextVoteType, nextUp, nextDown);\n    },\n    [voteType, upvotes, downvotes, onVoteChange]\n  );\n\n  return { voteType, upvotes, downvotes, vote };\n}\n\n// ─── Context ────────────────────────────────────────────────────────────────\n\nconst MinimalNotchContext = createContext<VoteState | null>(null);\n\nfunction useMinimalNotchContext(): VoteState {\n  const context = useContext(MinimalNotchContext);\n  if (!context) {\n    throw new Error(\n      \"MinimalNotch sub-components must be used within <MinimalNotch>\"\n    );\n  }\n  return context;\n}\n\n// ─── Root Provider ──────────────────────────────────────────────────────────\n\ninterface MinimalNotchProps {\n  defaultUpvotes?: number;\n  defaultDownvotes?: number;\n  onVoteChange?: (\n    voteType: VoteType,\n    upvotes: number,\n    downvotes: number\n  ) => void;\n  upvotes?: number;\n  downvotes?: number;\n  voteType?: VoteType;\n  onVote?: (direction: \"upvote\" | \"downvote\") => void;\n  children: ReactNode;\n  className?: string;\n}\n\nfunction MinimalNotch({\n  defaultUpvotes = 0,\n  defaultDownvotes = 0,\n  onVoteChange,\n  upvotes: controlledUpvotes,\n  downvotes: controlledDownvotes,\n  voteType: controlledVoteType,\n  onVote,\n  children,\n  className,\n}: MinimalNotchProps) {\n  const internalState = useVoteState(\n    defaultUpvotes,\n    defaultDownvotes,\n    onVoteChange\n  );\n\n  const isControlled = controlledUpvotes !== undefined;\n\n  const state: VoteState = isControlled\n    ? {\n        upvotes: controlledUpvotes,\n        downvotes: controlledDownvotes ?? 0,\n        voteType: controlledVoteType ?? null,\n        vote: (type) => onVote?.(type),\n      }\n    : internalState;\n\n  return (\n    <MinimalNotchContext.Provider value={state}>\n      <div className={cn(\"group flex gap-3\", className)}>{children}</div>\n    </MinimalNotchContext.Provider>\n  );\n}\n\n// ─── Card ───────────────────────────────────────────────────────────────────\n\ninterface MinimalNotchCardProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction MinimalNotchCard({ children, className }: MinimalNotchCardProps) {\n  return (\n    <div\n      className={cn(\n        \"flex-1 rounded-xl border border-border/50 bg-card px-4 py-4 transition-all hover:border-border hover:shadow-sm\",\n        className\n      )}\n    >\n      <div className=\"space-y-3\">{children}</div>\n    </div>\n  );\n}\n\n// ─── Title ──────────────────────────────────────────────────────────────────\n\ninterface MinimalNotchTitleProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction MinimalNotchTitle({ children, className }: MinimalNotchTitleProps) {\n  return (\n    <h3 className={cn(\"font-medium text-sm leading-snug\", className)}>\n      {children}\n    </h3>\n  );\n}\n\n// ─── Status Badge ───────────────────────────────────────────────────────────\n\ninterface MinimalNotchStatusProps {\n  children: ReactNode;\n  color?: BadgeColor;\n  className?: string;\n}\n\nfunction MinimalNotchStatus({\n  children,\n  color = \"blue\",\n  className,\n}: MinimalNotchStatusProps) {\n  return (\n    <span\n      className={cn(\n        \"mt-1.5 inline-flex items-center rounded-sm px-2 py-0.5 font-normal text-[10px]\",\n        COLOR_MAP[color],\n        className\n      )}\n    >\n      {children}\n    </span>\n  );\n}\n\n// ─── Tags Container ─────────────────────────────────────────────────────────\n\ninterface MinimalNotchTagsProps {\n  children: ReactNode;\n  className?: string;\n}\n\nfunction MinimalNotchTags({ children, className }: MinimalNotchTagsProps) {\n  return (\n    <div className={cn(\"flex flex-wrap gap-1\", className)}>{children}</div>\n  );\n}\n\n// ─── Individual Tag ─────────────────────────────────────────────────────────\n\ninterface MinimalNotchTagProps {\n  children: ReactNode;\n  color?: BadgeColor;\n  className?: string;\n}\n\nfunction MinimalNotchTag({\n  children,\n  color = \"gray\",\n  className,\n}: MinimalNotchTagProps) {\n  return (\n    <span\n      className={cn(\n        \"inline-flex items-center rounded-sm px-2 py-0.5 font-normal text-[10px]\",\n        COLOR_MAP[color],\n        className\n      )}\n    >\n      {children}\n    </span>\n  );\n}\n\n// ─── Meta ───────────────────────────────────────────────────────────────────\n\ninterface MinimalNotchMetaProps {\n  comments: number;\n  time: string;\n  className?: string;\n}\n\nfunction MinimalNotchMeta({\n  comments,\n  time,\n  className,\n}: MinimalNotchMetaProps) {\n  return (\n    <div\n      className={cn(\n        \"flex items-center gap-3 text-[11px] text-muted-foreground\",\n        className\n      )}\n    >\n      <span className=\"flex items-center gap-1\">\n        <Chat aria-hidden className=\"h-3 w-3\" />\n        {comments}\n      </span>\n      <span className=\"opacity-70\">{time}</span>\n    </div>\n  );\n}\n\n// ─── Vote Column with Notch ─────────────────────────────────────────────────\n\nfunction MinimalNotchVote() {\n  const { voteType, upvotes, downvotes, vote } = useMinimalNotchContext();\n\n  let notchColor = \"var(--color-border)\";\n  if (voteType === \"upvote\") {\n    notchColor = \"var(--color-primary)\";\n  } else if (voteType === \"downvote\") {\n    notchColor = \"var(--color-destructive)\";\n  }\n\n  return (\n    <div className=\"relative flex flex-col items-center justify-center gap-0 self-stretch\">\n      <AnimatePresence>\n        {voteType && (\n          <motion.div\n            animate={{ opacity: 0.5, scale: 1 }}\n            className={cn(\n              \"absolute top-1/2 left-1/2 h-10 w-10 -translate-x-1/2 -translate-y-1/2 rounded-full blur-xl\",\n              voteType === \"upvote\" ? \"bg-primary/25\" : \"bg-destructive/25\"\n            )}\n            exit={{ opacity: 0, scale: 0.5 }}\n            initial={{ opacity: 0, scale: 0.5 }}\n            transition={{ duration: 0.3 }}\n          />\n        )}\n      </AnimatePresence>\n      <button\n        aria-label={\n          voteType === \"upvote\" ? \"Remove upvote\" : \"Upvote this feedback\"\n        }\n        className={cn(\n          \"relative flex flex-1 flex-col items-center justify-end gap-0.5 pb-1 transition-colors duration-200\",\n          voteType === \"upvote\"\n            ? \"text-primary\"\n            : \"text-muted-foreground/40 hover:text-muted-foreground\"\n        )}\n        onClick={(e) => {\n          e.stopPropagation();\n          vote(\"upvote\");\n        }}\n        type=\"button\"\n      >\n        <CaretUp\n          aria-hidden\n          className=\"h-3.5 w-3.5\"\n          weight={voteType === \"upvote\" ? \"bold\" : \"regular\"}\n        />\n        <span className=\"font-medium text-[10px] tabular-nums\">{upvotes}</span>\n      </button>\n      <motion.div\n        animate={{\n          height: voteType ? 4 : 3,\n          backgroundColor: notchColor,\n          width: voteType ? 24 : 12,\n          boxShadow: voteType\n            ? `0 0 8px 1px ${notchColor}`\n            : \"0 0 0px 0px transparent\",\n        }}\n        className=\"rounded-full\"\n        transition={{ type: \"spring\", stiffness: 400, damping: 20 }}\n      />\n      <button\n        aria-label={\n          voteType === \"downvote\" ? \"Remove downvote\" : \"Downvote this feedback\"\n        }\n        className={cn(\n          \"relative flex flex-1 flex-col items-center justify-start gap-0.5 pt-1 transition-colors duration-200\",\n          voteType === \"downvote\"\n            ? \"text-destructive\"\n            : \"text-muted-foreground/40 hover:text-muted-foreground\"\n        )}\n        onClick={(e) => {\n          e.stopPropagation();\n          vote(\"downvote\");\n        }}\n        type=\"button\"\n      >\n        <span className=\"font-medium text-[10px] tabular-nums\">\n          {downvotes}\n        </span>\n        <CaretDown\n          aria-hidden\n          className=\"h-3.5 w-3.5\"\n          weight={voteType === \"downvote\" ? \"bold\" : \"regular\"}\n        />\n      </button>\n    </div>\n  );\n}\n\n// ─── Exports ────────────────────────────────────────────────────────────────\n\nexport {\n  MinimalNotch,\n  MinimalNotchCard,\n  MinimalNotchTitle,\n  MinimalNotchStatus,\n  MinimalNotchTags,\n  MinimalNotchTag,\n  MinimalNotchMeta,\n  MinimalNotchVote,\n};\n",
      "type": "registry:ui",
      "target": "components/ui/feedback-minimal-notch.tsx"
    }
  ],
  "meta": {
    "importSpecifier": "@/components/ui/feedback-minimal-notch"
  }
}